{% extends "template/welcome.html" %}

{% block passage_block %}
    <div class="card-body">
        <div>
            <h6 id="Passage" class="text-center font-weight-bold blue-text mt-3 mb-4 pb-4"></h6>
        </div>
        <hr>
        <div class="text-md-center">
            <form>
                <div class="form-group ">
                    <label for="formControlRange" id="words"> 2  words per second</label>
                    <input type="range" class="form-control-range" id="words_per_sec">

                </div>
            </form>
        </div>
    </div>


{% endblock passage_block %}



{% block js_block %}
    <script>
        var passage_container = document.getElementById("Passage");
        paragraph =  {{passage.paragraph|tojson}};

        paragraph = paragraph.split(" ");
        {#Setting the word length to be show at every sec #}
        {#get the slider#}
        var slider = document.getElementById("words_per_sec");
        var word = document.getElementById("words");
        slider.ondrag = function(ev) {
            console.log(ev);
            word.innerHTML = ev.valueOf() + word.innerText.slice(1, word.innerText.length);
        };
        {#todo :  set the time and read every one sec#}

        word = 0;
        len = 4;
        function next_words(ind, len) {
            setTimeout(function () {
                passage_container.innerHTML = paragraph.slice(word, word + len).join(" ");

                word += len;
                if (word < paragraph.length) {
                    next_words(0,len)
                }
            }, 500);

        }

        next_words(0, len);


    </script>
{% endblock js_block %}